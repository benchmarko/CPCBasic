/* globals cpcBasic */

"use strict";

cpcBasic.addItem("", function () { /*
100 REM Shot (Schuss)
110 MODE 1:CLEAR:DEFINT a-z:RANDOMIZE TIME
120 PRINT TAB(14)"** Schuss **"
130 WINDOW #1,12,27,5,10:GOSUB 900
140 WINDOW #2,1,40,18,20:GOTO 370
150 FOR x=1 TO 20:NEXT x
160 c.t!=time+20:while time<c.t!:call &bd19:wend:jo=JOY(0):t$=inkey$:IF upper$(t$)="S" THEN STOP
170 IF jo=0 and t$="" THEN 160
180 s=0:t=0:fe=0:IF jo AND 16 or t$=chr$(224) or t$=" " THEN fe=1:RETURN
190 IF jo AND 8 or t$=chr$(243) THEN s=1
200 IF jo AND 4 or t$=chr$(242) THEN s=-1
210 IF jo AND 2 or t$=chr$(241) THEN t=1
220 IF jo AND 1 or t$=chr$(240) THEN t=-1
230 RETURN
240 REM Positionsbestimmung:
250 CALL &BB03
260 xa=0:y1=1:x1=1:IF an=1 THEN xa=28
270 GOSUB 360:GOSUB 150:GOSUB 330
280 IF fe=1 THEN CLS #1:RETURN
290 x1=x1+s:y1=y1+t
300 IF x1>10 THEN x1=10 ELSE IF x1<1 THEN x1=1
310 IF y1>10 THEN y1=10 ELSE IF y1<1 THEN y1=1
320 GOTO 270
330 IF an=0 THEN c1=i(x1,y1):IF c1<2 THEN c1=255
340 IF an=1 THEN c1=h(x1,y1):IF c1<2 THEN c1=255
350 LOCATE x1+xa,y1+2:PRINT CHR$(c1):RETURN
360 LOCATE x1+xa,y1+2:PRINT CHR$(ch):RETURN
370 LOCATE 7,17:PRINT"Ueberwachungs-Computer:"
380 DIM i(10,10),h(10,10),t(8,2),p(8,2)
390 RESTORE 960:r=INT(RND*8)+1
400 FOR x=1 TO r:READ a,b:NEXT x
410 IF a=2 THEN 430
420 FOR x=1 TO 8:READ c,d:IF c<>2 THEN NEXT x
430 FOR x=1 TO 8:FOR y=1 TO 2:READ p(x,y):NEXT y,x
440 ch=239:an=0:PRINT#1,"Anfangsposition bestimmen !":GOSUB 250
450 e=x1:f=y1:z=0:i(e,f)=1:h(a,b)=1:GOSUB 360
460 ch=252:an=1:PRINT#1,"Raketenkoor-    dinaten?":GOSUB 250
470 m=x1:n=y1
480 PRINT#1,"Wohin ziehen ?":fe=1:WHILE fe=1:GOSUB 150:WEND:x1=e+s*2:y1=f+t*2
490 CLS #1:IF x1>10 OR x1<1 OR y1>10 OR y1<1 THEN 480
500 IF i(x1,y1)<>0 THEN 480
510 'FOR x=1 TO 8:IF p(x,1)+e=x1 THEN IF p(x,2)+f=y1 THEN 900
520 'NEXT x:GOTO 850
530 LOCATE e,f+2:PRINT CHR$(238):s=x1:t=y1:ch=239:xa=0:GOSUB 360
540 SOUND 4,0,20,5,0,0,7
550 FOR x=12 TO 27:LOCATE x,n+2:PRINT CHR$(243):LOCATE x-1,n+2:PRINT" ":NEXT
560 LOCATE x-1,n+2:PRINT" ":LOCATE m+28,n+2:PRINT CHR$(252):SOUND 4,100,20,4
570 LOCATE m+28,n+2:PRINT CHR$(253):SOUND 4,0,20,5,0,0,10
580 IF m=a THEN IF n=b THEN PRINT#2,"Hei! Du hast ihn!!":z=2:GOTO 760
590 l=1:FOR x=1 TO 8
600 IF p(x,1)+e>10 OR p(x,1)+e<1 OR p(x,2)+f>10 OR p(x,2)+f<1 THEN 630
610 IF i(p(x,1)+e,p(x,2)+f)<>0 THEN 630
620 t(l,1)=p(x,1)+e:t(l,2)=p(x,2)+f:l=l+1
630 NEXT x
640 l=l-1:IF l=1 THEN c=t(l,1):d=t(l,2) ELSE g=INT(RND*l)+1:c=t(g,1):d=t(g,2)
650 l=1:FOR x=1 TO 8
660 IF p(x,1)+a>10 OR p(x,1)+a<1 OR p(x,2)+b>10 OR p(x,2)+b<1 THEN 690
670 IF h(p(x,1)+a,p(x,2)+b)<>0 THEN 690
680 t(l,1)=p(x,1)+a:t(l,2)=p(x,2)+b:l=l+1
690 NEXT x
700 l=l-1:IF l=0 THEN PRINT#2,"Feind hat sich selbst eingekreist!!":z=2:c=e:d=f:GOTO 720
710 IF l=1 THEN j=t(1,1):k=t(1,2) ELSE g=INT(RND*l)+1:j=t(g,1):k=t(g,2)
720 LOCATE a+28,b+2:PRINT CHR$(238):SOUND 4,0,10,5,0,0,5
730 FOR x=26 TO 11 STEP -1:LOCATE x,d+2:PRINT CHR$(242):LOCATE x+1,d+2:PRINT" ":NEXT
740 LOCATE x+1,d+2:PRINT" ":LOCATE c,d+2:PRINT CHR$(252):SOUND 4,100,20,4
750 LOCATE c,d+2:PRINT CHR$(253):SOUND 4,0,20,5,0,0,10
760 i(e,f)=238:h(a,b)=238:i(c,d)=253:h(m,n)=253
770 IF c=s THEN IF d=t THEN PRINT#2,"Du bist genau in seine Rakete gelaufen !":z=1
780 e=s:f=t:a=j:b=k
790 FOR x=1 TO 8:IF p(x,1)+e>10 OR p(x,1)+e<1 OR p(x,2)+f>10 OR p(x,2)+f<1 THEN 810
800 IF i(p(x,1)+e,p(x,2)+f)=0 THEN 840
810 NEXT x
820 PRINT#2,"Dummkopf!":PRINT#2,"Du hast dich in eine Ecke"
830 PRINT#2,"eingeschlossen !!":z=1
840 IF z=0 THEN 460
850 PEN 3:IF z=1 THEN x1=e:y1=f:xa=0 ELSE x1=a:y1=b:xa=28
860 FOR i=1 TO 5:IF ch=239 THEN ch=253 ELSE ch=239
870 GOSUB 360:SOUND 4,0,15,8-i,0,0,10-i:FOR x=1 TO 80/10:call &bd19:NEXT x,i
880 WHILE (SQ(4) AND 128)<>0:call &bd19:WEND
890 LOCATE 1,22:PEN 1:IF z=1 THEN 1000 ELSE 1100
900 'SYMBOL AFTER 254
910 SYMBOL 255,0,0,0,24,52,106,87,0
920 LOCATE 1,2:PRINT"Dein Gebiet"SPC(16)"Feindesgebiet";
930 FOR i=1 TO 10
940 PRINT STRING$(10,255)SPC(18);STRING$(10,255);
950 NEXT i:RETURN
960 DATA 10,10,1,1,10,1,1,10,10,9,9,10,1,2,2,1
970 DATA -2,-2,0,-2,2,-2,2,0,2,2,0,2,-2,2,-2,0
980 REM Lieder
990 REM Richard Wagner: Brautchor aus 'Lohengrin'
1000 RESTORE 1060
1010 ENV 3,10,-1,10:laut=12
1020 READ ton,dauer
1030 IF ton=-1 THEN WHILE SQ(4)<>4:call &bd19:WEND:END
1040 SOUND 1,ton/2,dauer,laut,3:SOUND 2,ton*2,dauer,laut,3:SOUND 4,ton,dauer,laut,3
1050 GOTO 1020
1060 DATA 358,60,268,45,0,2,268,15,0,2,268,120,358,60,239,45,284,15,268,120,358,60,268,45,201,15,0,2,201,60,213,45,239,15,268,60,239,2,268,2,284,45,268,15,239,120
1070 DATA 358,60,268,45,0,2,268,15,0,2,268,120,358,60,239,45,284,15,268,120,358,60,268,45,201,15,0,2,201,60,213,45,239,15,268,60,239,2,268,2,284,45,268,15,239,120
1080 DATA 358,60,268,45,0,2,268,15,0,2,268,120,358,60,239,45,284,15,268,120,358,60,268,45,213,15,179,60,213,45,268,15,319,60,239,45,213,15,268,120,-1,-1
1090 REM Franz Schubert: Die Forelle
1100 ENV 2,10,-1,10
1110 RESTORE 1150:laut1=12:laut2=10
1120 READ ton,dauer:IF ton=-1 THEN WHILE SQ(4)<>4:call &bd19:WEND:STOP
1130 IF ton=0 THEN SOUND 1,ton,dauer:SOUND 2,ton,dauer:SOUND 4,ton,dauer:GOTO 1120
1140 dauer=dauer*1.5:SOUND 1,ton*2,dauer/2,laut1,2:SOUND 1,ton,dauer/2,laut1,2:SOUND 2,ton,dauer,laut2,2:SOUND 4,ton*0.25,dauer,laut1,2:GOTO 1120
1150 DATA 426,25,319,25,0,2,319,25,253,25,0,2,253,25,319,50,426,25,0,2,426,25,0,2,426,25,0,2,426,25,284,12,319,12,338,12,379,12,426,75,0,2
1160 DATA 426,25,319,25,0,2,319,25,253,25,0,2,253,25,319,50,426,25,319,25,338,25,379,12,338,12,319,25,451,25,426,75,0,2
1170 DATA 426,25,338,25,0,2,338,25,319,12,338,25,379,12,338,12,319,50,426,25,319,25,338,25,0,2,338,25,0,2,338,12,239,12,284,12,338,12,319,75,0,2
1180 DATA 319,25,379,25,0,2,379,25,0,2,379,25,319,25,0,2,319,50,426,25,0,2,426,25,0,2,426,25,0,2,426,25,284,25,338,25,319,75,0,2
1190 DATA 319,25,379,25,0,2,379,25,0,2,379,25,319,25,0,2,319,50,426,25,0,2,426,25,0,2,426,25,0,2,426,25,284,25,338,25,319,75,-1,-1
*/ });
